<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Our Packages - Husora Design</title>
  <script src="js/productsList.js"></script>
  <script src="js/packages.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
  <link rel="icon" href="images/favicon.png" type="image/png">
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/packages.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
  <link rel="icon" href="images/favicon.png" type="image/png">
  <link rel="stylesheet" href="css/index.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Manrope:wght@200..800&family=Oswald:wght@200..700&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>

<body class="bg-gray-100 text-black">
<header class="bg-white shadow-sm sticky top-0 z-50 ">
  <div class="max-w-6xl mx-auto px-4 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4">
    <div class="flex items-center gap-4 w-full md:w-auto">
      <button id="mobile-menu-toggle" class="md:hidden text-gray-700 focus:outline-none">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
      <a href="index.html">
        <img src="images/husora_logo_header_mobile.png" alt="husora mobile logo" class="h-6 w-auto block md:hidden">
        <img src="images/husora_logo_header.png" alt="husora desktop logo" class="h-16 w-auto hidden md:block">
      </a>
    </div>

    <div class="w-full md:hidden mt-2 search-bar">
      <div class="relative w-full">
        <div class="absolute inset-y-0 left-3 flex items-center pointer-events-none">
          <svg id="mobile-search-icon-default" class="w-5 h-5 text-gray-500 transition-opacity duration-200" xmlns="http://www.w3.org/2000/svg"
               viewBox="0 0 24 24" fill="currentColor">
            <g id="_01_align_center" data-name="01 align center">
              <path d="M24,22.586l-6.262-6.262a10.016,10.016,0,1,0-1.414,1.414L22.586,24ZM10,18a8,8,0,1,1,8-8A8.009,8.009,0,0,1,10,18Z"/>
            </g>
          </svg>
          <svg id="mobile-search-icon-active" class="w-5 h-5 text-gray-500 absolute opacity-0 transition-opacity duration-200"
               xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M24,22.586l-6.257-6.258a10,10,0,1,0-1.415,1.415L22.586,24Z"/>
          </svg>
        </div>
        <input id="mobile-search-input" type="text" placeholder="Търсене..."
       class="w-full py-2 pl-10 pr-4 border border-black rounded-full text-black placeholder-gray-500"
       onkeydown="if(event.key === 'Enter') handleSearch(this.value);" />
      </div>
    </div>

    <div class="relative flex-1 max-w-xl hidden md:block">
      <div class="absolute inset-y-0 left-3 flex items-center pointer-events-none">
        <svg id="desktop-search-icon-default" class="w-5 h-5 text-black transition-opacity duration-200" xmlns="http://www.w3.org/2000/svg"
             viewBox="0 0 24 24" fill="currentColor">
          <g id="_01_align_center" data-name="01 align center">
            <path d="M24,22.586l-6.262-6.262a10.016,10.016,0,1,0-1.414,1.414L22.586,24ZM10,18a8,8,0,1,1,8-8A8.009,8,0,0,1,10,18Z"/>
          </g>
        </svg>
        <svg id="desktop-search-icon-active" class="w-5 h-5 text-gray-500 absolute opacity-0 transition-opacity duration-200"
             xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M24,22.586l-6.262-6.262a10.016,10.016,0,1,0-1.414,1.414L22.586,24ZM10,18a8,8,0,1,1,8-8A8.009,8,0,0,1,10,18Z"/>
        </svg>
      </div>
      <input id="desktop-search-input" type="text" placeholder="Търсене..."
       class="w-full py-2 pl-10 pr-4 border border-black rounded-full text-black placeholder-gray-700 search-input-glow"
       onkeydown="if(event.key === 'Enter') handleSearch(this.value);" />
         <button id="clear-search" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 hidden">
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
  </button>
    </div>

    <div class="flex items-center gap-0 icon-buttons">
<button class="group relative flex items-center gap-2 bg-white font text-black hover:text-blue-600 px-4 py-2">
  <svg
    class="w-6 h-6 fill-current transition-opacity duration-300"
    viewBox="0 0 24 24"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path d="M12.006,12.309c3.611-.021,5.555-1.971,5.622-5.671-.062-3.56-2.111-5.614-5.634-5.637-3.561,.022-5.622,2.17-5.622,5.637,0,3.571,2.062,5.651,5.634,5.672Zm-.012-9.309c2.437,.016,3.591,1.183,3.634,3.636-.047,2.559-1.133,3.657-3.622,3.672-2.495-.015-3.582-1.108-3.634-3.654,.05-2.511,1.171-3.639,3.622-3.654Z"/>
    <path d="M11.994,13.661c-5.328,.034-8.195,2.911-8.291,8.322-.01,.552,.43,1.008,.982,1.018,.516-.019,1.007-.43,1.018-.982,.076-4.311,2.08-6.331,6.291-6.357,4.168,.027,6.23,2.106,6.304,6.356,.01,.546,.456,.983,1,.983h.018c.552-.01,.992-.465,.983-1.017-.092-5.333-3.036-8.288-8.304-8.322Z"/>
  </svg>

  <svg
    class="w-6 h-6 fill-current absolute top-2 left-4 transition-opacity duration-300 opacity-0 group-hover:opacity-100"
    viewBox="0 0 24 24"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path d="M12.006,12.309c3.611-.021,5.555-1.971,5.622-5.671-.062-3.56-2.111-5.614-5.634-5.637-3.561,.022-5.622,2.122-5.622,5.672s2.062,5.615,5.634,5.636Z"/>
    <path d="M11.994,13.661c-5.328,.034-8.195,2.911-8.291,8.322-.004,.268,.099,.527,.287,.718s.445,.299,.713,.299h14.595c.268,0,.525-.108,.713-.299,.188-.191,.291-.45,.287-.718-.092-5.333-3.036-8.288-8.304-8.322Z"/>
  </svg>

  <span class="hidden md:inline">Акаунт</span>
</button>

<a href="bookmarks.html" class="group relative px-4 py-2 bg-white font-bold transition-colors duration-300 flex items-center gap-1 hover:text-blue-600">
    <svg id="bookmark-icon-default"
         class="w-5 h-5 transition-opacity duration-200 text-black group-hover:text-blue-600 group-hover:opacity-0"
         xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path d="M20,0H5c-1.654,0-3,1.346-3,3V21c0,1.654,1.346,3,3,3H22V2c0-1.103-.897-2-2-2Zm0,18H8V2h4V11l2.5-2.5,2.5,2.5V2h3V18ZM5,2h1V18h-1c-.351,0-.687,.061-1,.172V3c0-.551,.449-1,1-1Zm0,20c-.551,0-1-.449-1-1s.449-1,1-1h15v2H5Z"/>
    </svg>

    <svg id="bookmark-icon-hover"
         class="w-5 h-5 absolute transition-opacity duration-200 opacity-0 text-black group-hover:text-blue-600 group-hover:opacity-100"
         xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path d="M4,18c-.738-.001-1.451,.271-2,.765V3C2,1.343,3.343,0,5,0h1V18h-2ZM20,0h-2V11l-2.5-2.5-2.5,2.5V0h-5V18h14V2c0-1.105-.895-2-2-2ZM2,22c0,1.105,.895,2,2,2H22v-4H4c-1.105,0-2,.895-2,2Z"/>
    </svg>
    <span id="bookmark-text"></span>
</a>

      <button class="group relative px-4 py-2 bg-white font-bold text-black hover:text-blue-600 transition-colors duration-300 flex items-center gap-1">
        <svg class="w-5 h-5 text-current transition-opacity duration-300 opacity-100 group-hover:opacity-0 absolute" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <g id="_01_align_center" data-name="01 align center">
            <path d="M24,3H4.242L4.2,2.649A3,3,0,0,0,1.222,0H0V2H1.222a1,1,0,0,1,.993.883L3.8,16.351A3,3,0,0,0,6.778,19H20V17H6.778a1,1,0,0,1-.993-.884L5.654,15H21.836ZM20.164,13H5.419L4.478,5H21.607Z"/>
            <circle cx="7" cy="22" r="2"/>
            <circle cx="17" cy="22" r="2"/>
          </g>
        </svg>

        <svg class="w-5 h-5 text-current transition-opacity duration-300 opacity-0 group-hover:opacity-100 absolute" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M24,3H4.242L4.2,2.649A3,3,0,0,0,1.222,0H0V2H1.222a1,1,0,0,1,.993.883L3.8,16.351A3,3,0,0,0,6.778,19H20V17H6.778a1,1,0,0,1-.993-.884L5.654,15H21.836Z"/>
          <circle cx="7" cy="22" r="2"/>
          <circle cx="17" cy="22" r="2"/>
        </svg>

        <span class="absolute -top-4 -right-7 bg-red-400 text-white text-xs rounded-full px-2 py-0.5">4</span>
      </button>
    </div>
  </div>
</header>

  <div id="nav-buttons-desktop"
    class="fixed top-[72px] w-full bg-opacity- bg-gray-100 z-40 shadow-lg transform transition-transform duration-300 ease-in-out">
    <div class="max-w-6xl mx-auto px-12 py-2 flex flex-wrap justify-center gap-6">
      <a href="index.html" 
        class="px-12 py-2 bg-none font- hover:text-blue-600 transition-colors duration-300">Начало</a>
      <a href="catalog.html"
        class="px-12 py-2 bg-none font- hover:text-blue-600 transition-colors duration-300">Каталог</a>
      <a href="packages.html"
        class="px-12 py-2 bg-none font-semibold hover:text-blue-600 transition-colors duration-300 active-nav">Пакети</a>
      <a href="appreciation.html"
        class="px-12 py-2 bg-none font-semibold hover:text-blue-600 transition-colors duration-300">Признателност</a>
      <a href="about.html"
       class="px-12 py-2 bg-none font-semibold hover:text-blue-600 transition-colors duration-300">За нас</a>
    </div>
  </div>

    <div id="mobile-menu" class="fixed top-16 left-0 w-2/3 max-w-sm h-full bg-white z-50 shadow-lg transform -translate-x-full transition-transform duration-300 ease-in-out md:hidden">
    <nav class="flex flex-col p-6 space-y-4">
      <a href="index.html" class="font-semibold hover:text-blue-600">Начало</a>
      <a href="catalog.html" class="font- hover:text-blue-600">Каталог</a>
      <a href="packages.html" class="font- hover:text-blue-600">Пакети</a>
      <a href="appreciation.html" class="font- hover:text-blue-600">Признателност</a>
      <a href="about.html" class="font- hover:text-blue-600">За нас</a>
    </nav>
  </div>
</div>

<div class="w-full h-14 bg-gray-50"></div>

<main class="max-w-7xl mx-auto px-0 py-6">
    <h1 class="text-3xl font-bold mb-8 text-center">Нашите Комплекти</h1>
    <div id="packages-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        </div>
</main>

<footer class="bg-gray-800 text-white text-sm py-8 text-center">
  © 2025 3D Print Shop. All rights reserved.
</footer>

<script>
  // Function to handle search, redirects to catalog.html with search query
  function handleSearch(query) {
    if (query) {
      window.location.href = `catalog.html?search=${encodeURIComponent(query)}`;
    }
  }

  // Function to handle search icon visibility and styling
  function handleSearchIconToggle(inputId, defaultIconId, activeIconId) {
    const input = document.getElementById(inputId);
    const defaultIcon = document.getElementById(defaultIconId);
    const activeIcon = document.getElementById(activeIconId);
    const clearSearchButton = document.getElementById('clear-search'); // Get the clear button

    function update() {
      // Ensure input element exists before proceeding
      if (!input) return;

      const isActive = document.activeElement === input || input.value.trim() !== '';

      // Toggle icon visibility
      if (defaultIcon) defaultIcon.style.opacity = isActive ? '0' : '1';
      if (activeIcon) activeIcon.style.opacity = isActive ? '1' : '0';

      // Toggle text color
      if (isActive) {
        if (defaultIcon) defaultIcon.classList.add('text-blue-500');
        if (activeIcon) activeIcon.classList.add('text-blue-500');
        // Show clear button if active and has value
        if (clearSearchButton) clearSearchButton.classList.remove('hidden');
      } else {
        if (defaultIcon) defaultIcon.classList.remove('text-blue-500');
        if (activeIcon) activeIcon.classList.remove('text-blue-500');
        // Hide clear button
        if (clearSearchButton) clearSearchButton.classList.add('hidden');
      }
    }

    if (input) { // Only add listeners if input exists
      input.addEventListener('focus', update);
      input.addEventListener('blur', update);
      input.addEventListener('input', update);
      // Initial update on page load
      update();
    }

    // Add event listener for clear search button
    if (clearSearchButton) {
      clearSearchButton.addEventListener('click', () => {
        if (input) input.value = '';
        update(); // Update icons/button visibility after clearing
        handleSearch(''); // Trigger a search with an empty query to reset catalog
      });
    }
  }

  // Initialize search icon toggles for both mobile and desktop
  handleSearchIconToggle('mobile-search-input', 'mobile-search-icon-default', 'mobile-search-icon-active');
  handleSearchIconToggle('desktop-search-input', 'desktop-search-icon-default', 'desktop-search-icon-active');
</script>


  <script>
    const toggleBtn = document.getElementById('mobile-menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');

    toggleBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('-translate-x-full');
    });
  </script>

  <script>
    let lastScrollY = window.scrollY;
    const nav = document.getElementById("nav-buttons-desktop");

    window.addEventListener("scroll", () => {
      if (window.scrollY > lastScrollY) {
        // Scrolling down – hide nav with slide up
        nav.classList.add("-translate-y-full");
      } else {
        // Scrolling up – show nav with slide down
        nav.classList.remove("-translate-y-full");
      }
      lastScrollY = window.scrollY;
    });
  </script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const packagesGrid = document.getElementById("packages-grid");

        packages.forEach(pkg => {
            let totalPriceSeparate = 0;
            let productsInPackageHtml = '';

            // Find the first product in the package to get category information
            const firstProductInPackage = pkg.products.length > 0 ? products.find(p => p.id === pkg.products[0]) : null;

            pkg.products.forEach(productId => {
                const product = products.find(p => p.id === productId);
                if (product) {
                    totalPriceSeparate += product.price;
                    productsInPackageHtml += `
                        <div class="flex items-center gap-2 mb-2">
                            <img src="${product.images[0] || 'placeholder.jpg'}" alt="${product.name}" class="w-16 h-16 object-cover rounded-sm border border-gray-200">
                            <div>
                                <p class="text-sm font-medium">${product.name}</p>
                                <p class="text-xs text-gray-500">$${product.price.toFixed(2)}</p>
                            </div>
                        </div>
                    `;
                }
            });

            const packagePrice = totalPriceSeparate * (1 - pkg.discountPercentage / 100);
            const savedAmount = totalPriceSeparate - packagePrice;

            const packageCardHtml = `
<a href="package-detail.html?id=${pkg.id}" class="block bg-white rounded-sm border border-gray-300 shadow-sm hover:shadow-md transition overflow-hidden">
    ${firstProductInPackage ? `
        <div class="px-2 pt-2 pb-2 flex items-center space-x-2 text-xs font-semibold">
          <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-sm uppercase">${categoryNames[firstProductInPackage.category] || firstProductInPackage.category}</span>
          <span class="text-blue-800">&gt;</span>
          <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-sm uppercase">${subcategoryNames[firstProductInPackage.subcategory] || firstProductInPackage.subcategory}</span>
          ${firstProductInPackage.subcategory2 ? `
            <span class="text-blue-800">&gt;</span>
            <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-sm uppercase">${subcategory2Names[firstProductInPackage.subcategory2] || firstProductInPackage.subcategory2}</span>` : ``}
        </div>
    ` : ''}
    <img src="${pkg.images[0] || 'placeholder.jpg'}" alt="${pkg.name}" class="w-full h-60 object-cover"/>
    <div class="p-4 flex flex-col">
        <div class="flex-grow">
            <h2 class="text-2xl font-bold mb-3">${pkg.name}</h2>
            <p class="text-gray-700 mb-4">${pkg.description}</p>

            <div class="mb-4">
                <h3 class="text-lg font-semibold mb-2">Включени Продукти:</h3>
                ${productsInPackageHtml}
            </div>

            <div class="flex flex-col items-start mb-4">
                <p class="text-lg text-gray-500 line-through">Цена поотделно: $${totalPriceSeparate.toFixed(2)}</p>
                <p class="text-3xl font-bold text-blue-600">Пакетна Цена: $${packagePrice.toFixed(2)}</p>
                <p class="text-green-600 font-semibold">Спестявате: $${savedAmount.toFixed(2)} (${pkg.discountPercentage}%)</p>
            </div>
        </div>
        <button class="w-full bg-blue-600 text-white py-3 rounded-md font-semibold hover:bg-blue-700 transition">
            Виж Детайли
        </button>
    </div>
</a>
            `;
            packagesGrid.insertAdjacentHTML("beforeend", packageCardHtml);
        });
    });
</script>

</body>
</html>